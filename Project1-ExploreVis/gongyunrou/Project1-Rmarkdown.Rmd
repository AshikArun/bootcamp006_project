---
title: "project1-Rmarkdown"
author: "Yunrou Gong (Crystal)"
date: "July 15, 2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction
Airplane is one of the  main transportation tools for carring people to travel around the world. Last year,over 798 million air passengers were transported  include both domestic and international aircraft passengers of air carriers registered in the U.S.The number of passengers been carried was increased dramatically by around 72%, compared to that of year 1990. The air transport industry a vital engine of global socio-economic growth,  is considerably important for economic development, creating direct and indirect employment, supporting tourism and local businesses, and stimulating foreign investment and international trade. Moreover, it is also played an crucial part in population movement and world exploration.Due to the huge historical records of the flights, we are able to do population flow analysis to get the insight of the moving behaviour of people.  
This report will do the monthly analysis of flow of people for different aiports during the year 2009 to explore the moving pattern via combining the social envrionemnt attributes. 


# Data Set Description  

##Abstract:
The origin data set is over 3.5 million monthly domestic flight records from 1990 to 2009. Data are arranged as an adjacency list with metadata.

###Fields:  
Short name	Type	Description  
Origin	String	Three letter airport code of the origin airport  
Destination	String	Three letter airport code of the destination airport  
Origin City	String	Origin city name  
Destination City	String	Destination city name  
Passengers	Integer	Number of passengers transported from origin to destination  
Seats	Integer	Number of seats available on flights from origin to destination  
Flights	Integer	Number of flights between origin and destination (multiple records for one month, many with flights > 1)  
Distance	Integer	Distance (to nearest mile) flown between origin and destination  
Fly Date	Integer	The date (yyyymm) of flight  
Origin Population	Integer	Origin city's population as reported by US Census  
Destination Population	Integer	Destination city's population as reported by US Census    

###Snippet:  
MFR    RDM    Medford, OR    Bend, OR    0    0    1    156    200810    200298    157730  
AMA    EKO    Amarillo, TX    Elko, NV    124    124    1    858    199308    202960    40259  
TUS    EKO    Tucson, AZ    Elko, NV    112    124    1    658    199308    711392    40259  
AMA    EKO    Amarillo, TX    Elko, NV    115    124    1    858    199406    206315    41668  
ICT    EKO    Wichita, KS    Elko, NV    100    124    1    1007    199607    552884    45034  
SPS    EKO    Wichita Falls, TX    Elko, NV    122    124    1    1059    199603    147683    45034   

###Source(s)  
1.US Census Bureau  
2.RITA/Transtats, Bureau of Transportation Statistics  

Year: 2009

URL: http://www.infochimps.com/datasets/35-million-us-domestic-flights-from-1990-to-2009  

##Data Manipulation  

Bascially, I filter the original data set into only one year of 2009 and remove the rows that the origin airport and destination airport is the same. Additionaly, I also delete the rows with zero value in column "Passengers".


```{r flights, include=FALSE}
setwd("~/Desktop/FLIGHT/")
library(dplyr)
library(ggplot2)
library(maps)
library(googleVis)
year2009<- read.csv("year2009.csv")
tbl_df(year2009)
```

### Accumulative flow of passengers at each airport in year 2009   

```{r top10outflow, echo=FALSE}
#choose the top 15 Origin airport by Passengers_out
year2009_2<- year2009%>%group_by(Origin)%>%
  summarise(Passengers_out=sum(Passengers),flights_out=sum(Flights))%>%
  arrange(desc(Passengers_out))
top15_Origin<-year2009_2[1:15,]
  
# bar chart of top15 origin airport by Passengers_out
top15outflow.plot<-ggplot(data=top15_Origin,aes(x=reorder(Origin,-Passengers_out)))+
  geom_bar(aes(y=Passengers_out,fill=Origin),stat = "identity")

top15outflow.plot<-top15outflow.plot+labs(
  title="Top 15 Accumulative Outflow of Passengers to Origin Airport",
  x="Origin Airport",
  y="Number of Passengers Outflow")

top15outflow.plot  

#choose the top 15 Dstination airport by Passengers_in
year2009_3<- year2009%>%group_by(Destination)%>%
  summarise(Passengers_in=sum(Passengers),flights_in=sum(Flights))%>%
  arrange(desc(Passengers_in))
top15_Destination<-year2009_3[1:15,]

# bar chart of top10 origin airport by Passengers_out
top15inflow.plot<-ggplot(data=top15_Destination,aes(x=reorder(Destination,-Passengers_in)))+
  geom_bar(aes(y=Passengers_in,fill=Destination),stat = "identity")

top15inflow.plot<-top15inflow.plot+labs(
  title="Top 15 Accumulative Inflow of Passengers to Destination Airport",
  x="Destination Airport",
  y="Number of Passengers Inflow")

top15inflow.plot

```



